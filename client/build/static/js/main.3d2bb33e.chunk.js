(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{31:function(e,t,n){e.exports=n(43)},36:function(e,t,n){},43:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(25),l=n.n(c),o=(n(36),n(14)),s=n(12),i=n(1),u=n.n(i),m=n(5),p=(n(19),n(17),n(3)),f=function(){var e=Object(a.useState)(!1),t=Object(p.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)(!1),l=Object(p.a)(c,2),o=l[0],s=l[1];return{loading:n,request:Object(a.useCallback)(function(){var e=Object(m.a)(u.a.mark((function e(t){var n,a,c,l,o,i=arguments;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=i.length>1&&void 0!==i[1]?i[1]:"GET",a=i.length>2&&void 0!==i[2]?i[2]:null,c=i.length>3&&void 0!==i[3]?i[3]:{},r(!0),e.prev=4,a&&(a=JSON.stringify(a),c["Content-Type"]="application/json"),e.next=8,fetch(t,{method:n,body:a,headers:c});case 8:return l=e.sent,e.next=11,l.json();case 11:if(o=e.sent,l.ok){e.next=14;break}throw new Error(o.message||"Unknown error");case 14:return r(!1),e.abrupt("return",o);case 18:throw e.prev=18,e.t0=e.catch(4),r(!1),s(e.t0.message),e.t0;case 23:case"end":return e.stop()}}),e,null,[[4,18]])})));return function(t){return e.apply(this,arguments)}}(),[]),error:o,clearError:Object(a.useCallback)((function(){return s(null)}),[])}},d=function(){return Object(a.useCallback)((function(e){window.M&&e&&window.M.toast({html:e})}),[])};function b(){}var g=Object(a.createContext)({token:null,userId:null,login:b,logout:b,isAuthenticated:!1}),v=function(e){var t=e.answer,n=e.index,a=e.answered,c=e.clickAnswer,l=-1!==t.indexOf("@"),o=(null===a?"#fff":a===n&&l&&"#66ff66")||a===n&&!l&&"#bbbbbb"||a!==n&&l&&"#ff6666"||"#fff";return r.a.createElement("li",{className:"answer",key:n,index:n,onClick:c,style:{borderRadius:"0.5rem",border:"1px solid #000",padding:"0.8rem",margin:"0.5rem auto",width:"100%",maxWidth:"600px",cursor:null===a?"pointer":"default",background:o,transition:"0.2s linear"}},"".concat(n,") ").concat(t.replace("@ ","")))},h=n(18),E=function(e){var t=e.start,n=e.stop,a=Math.floor((t+n)/2),c=Math.floor((n-t)/2);return r.a.createElement(r.a.Fragment,null,r.a.createElement(h.a,{style:{marginBottom:"2rem"}},r.a.createElement(h.a,{striped:!0,now:t,key:1}),r.a.createElement(h.a,{striped:!0,variant:"success",now:n-t,key:2,label:"".concat(a,"\xb1").concat(c,"%")}),r.a.createElement(h.a,{striped:!0,now:100-n,key:3})))},k=n(27),O=n(28),x=n(15),w=function(e){var t=d(),n=Object(a.useContext)(g),c=Object(a.useState)(null),l=Object(p.a)(c,2),o=l[0],s=l[1],i=f(),b=(i.loading,i.request),h=Object(a.useState)(null),w=Object(p.a)(h,2),j=w[0],y=w[1],S=Object(a.useState)(null),C=Object(p.a)(S,2),N=C[0],I=C[1],T=Object(a.useState)([]),A=Object(p.a)(T,2),B=(A[0],A[1]),D=Object(a.useState)(27),M=Object(p.a)(D,2),q=M[0],G=M[1],J=Object(a.useState)(89),z=Object(p.a)(J,2),F=z[0],W=z[1],L=function(){var t=Object(m.a)(u.a.mark((function t(){var n;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,b("/api/bilet/".concat(o),"GET");case 3:n=t.sent,console.log(n),n.hint=n.hint.split("<a ").map((function(e){return e.slice(e.indexOf(">")+1).replace("</a>","")})).join(""),e.history.push("/bilet/"+o),y(n),t.next=12;break;case 10:t.prev=10,t.t0=t.catch(0);case 12:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(){return t.apply(this,arguments)}}();Object(a.useEffect)((function(){null!==o&&L()}),[o]);var P=function(){var e=Object(m.a)(u.a.mark((function e(a){var r,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.preventDefault(),null!==N){e.next=15;break}return e.prev=2,r=parseInt(a.target.getAttribute("index")),I(r),e.next=7,b("/api/answer/".concat(o,"&").concat(r),"GET",null,{Authorization:"Bearer "+n.token});case 7:c=e.sent,t(c.message),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(2),t(e.t0.message),-1!==e.t0.message.indexOf("invalid")&&n.logout();case 15:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(t){return e.apply(this,arguments)}}(),R=function(){var e=Object(m.a)(u.a.mark((function e(){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,b("/api/nextBilet","GET",null,{Authorization:"Bearer "+n.token});case 3:if(a=e.sent,console.log(a),t(a.message),"user doesnt exists"!==a.message){e.next=9;break}return n.logout(),e.abrupt("return");case 9:B(a.probs.slice(0,10)),s(a.n),G(100*Math.max(a.mScore-a.interval/2,0)),W(100*Math.min(a.mScore+a.interval/2,1)),e.next=20;break;case 15:e.prev=15,e.t0=e.catch(0),console.log(e.t0.message),t(e.t0.message),-1!==e.t0.message.indexOf("expired")&&n.logout();case 20:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(){return e.apply(this,arguments)}}(),U=function(){var e=Object(m.a)(u.a.mark((function e(){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,b("/api/answer/delete","GET");case 3:a=e.sent,t(a.message),e.next=12;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0.message),t(e.t0.message),-1!==e.t0.message.indexOf("expired")&&n.logout();case 12:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),$=function(){var e=Object(m.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),I(null),e.next=4,R();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(a.useEffect)((function(){null===o&&R()}),[o]);return r.a.createElement(r.a.Fragment,null,j&&j.question&&r.a.createElement("div",{className:"col s6 offset-s3",style:{marginTop:"5%"}},r.a.createElement("div",{style:{width:"fit-content",marginBottom:"1rem",marginLeft:"auto",marginRight:"0"}},r.a.createElement(k.a,{"aria-label":"Toolbar with button groups"},r.a.createElement(O.a,{className:"mr-2","aria-label":"First group"},r.a.createElement(x.a,{onClick:U},"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0434\u0430\u043d\u043d\u044b\u0435")," ",r.a.createElement(x.a,{onClick:n.logout},"\u0412\u044b\u0439\u0442\u0438")))),r.a.createElement(E,{start:q,stop:F}),r.a.createElement("h5",{style:{textAlign:"center"}},j.question),j.img.length&&r.a.createElement("img",{src:"https://biletpdd.ru".concat(j.img),alt:"img",style:{display:"block",maxWidth:"100%",margin:"0 auto",transition:"1s"}})||"",r.a.createElement("ul",null,j.answers.map((function(e,t){return r.a.createElement(v,{key:t,answer:e,index:t,answered:N,clickAnswer:P})}))),null!==N&&r.a.createElement("p",{style:{textAlign:"center"}},j.hint),null!==N&&r.a.createElement(x.a,{variant:"primary",size:"lg",style:{display:"block",width:"fit-content",margin:"0 auto",marginTop:"2rem",marginBottom:"5rem"},onClick:$},"\u0414\u0430\u043b\u0435\u0435 >"))||r.a.createElement("h1",null,"Loading..."))},j=function(){d();var e=Object(a.useContext)(g),t=Object(a.useState)(null),n=Object(p.a)(t,2),c=(n[0],n[1],f()),l=(c.loading,c.request),o=function(){var t=Object(m.a)(u.a.mark((function t(){var n;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,l("/api/auth/login_random","POST");case 3:n=t.sent,e.login(n.token,n.userId),t.next=9;break;case 7:t.prev=7,t.t0=t.catch(0);case 9:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(){return t.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement("h3",{style:{textAlign:"center"}},"\u0422\u0440\u0435\u043d\u0430\u0436\u0435\u0440 \u0434\u043b\u044f \u043f\u043e\u0434\u0433\u043e\u0442\u043e\u0432\u043a\u0438 \u043a \u0442\u0435\u043e\u0440\u0435\u0442\u0438\u0447\u0435\u0441\u043a\u043e\u043c\u0443 \u044d\u043a\u0437\u0430\u043c\u0435\u043d\u0443 \u041f\u0414\u0414"),r.a.createElement("div",{style:{margin:"auto",width:"fit-content"}},r.a.createElement("br",null),r.a.createElement("p",null,"\u041d\u0430 \u044d\u0442\u043e\u043c \u0441\u0430\u0439\u0442\u0435 \u0432\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u043f\u0440\u043e\u0432\u0435\u0440\u0438\u0442\u044c \u0441\u0435\u0431\u044f \u043d\u0430 \u0437\u043d\u0430\u043d\u0438\u0435 \u041f\u0414\u0414"),r.a.createElement("p",null,"\u041a\u0430\u0436\u0434\u044b\u0439 \u0432\u0430\u0448 \u043e\u0442\u0432\u0435\u0442 \u0430\u043d\u0430\u043b\u0438\u0437\u0438\u0440\u0443\u0435\u0442\u0441\u044f \u0441\u0438\u0441\u0442\u0435\u043c\u043e\u0439, \u0434\u043b\u044f \u0442\u043e\u0433\u043e \u0447\u0442\u043e\u0431\u044b \u043d\u0430\u0438\u0431\u043e\u043b\u0435\u0435 \u0431\u044b\u0441\u0442\u0440\u043e \u0432\u044b\u044f\u0432\u0438\u0442\u044c \u043f\u0440\u043e\u0431\u0435\u043b\u044b \u0432 \u0437\u043d\u0430\u043d\u0438\u044f\u0445"),r.a.createElement("p",null,"\u0421\u0438\u0441\u0442\u0435\u043c\u0430 \u043d\u0435 \u0441\u043e\u0431\u0438\u0440\u0430\u0435\u0442 \u043f\u0435\u0440\u0441\u043e\u043d\u0430\u043b\u044c\u043d\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435"),r.a.createElement("p",null,'\u041d\u0430\u0436\u043c\u0438\u0442\u0435 \u043a\u043d\u043e\u043f\u043a\u0443 "\u041d\u0430\u0447\u0430\u0442\u044c \u0442\u0435\u0441\u0442" \u0435\u0441\u043b\u0438 \u0432\u044b \u0445\u043e\u0442\u0438\u0442\u0435 \u043f\u0440\u043e\u0439\u0442\u0438 \u0442\u0435\u0441\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u0438 \u0441\u043e\u0433\u043b\u0430\u0448\u0430\u0435\u0442\u0435\u0441\u044c \u043d\u0430 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435 \u0444\u0430\u0439\u043b\u043e\u0432 cookie'),r.a.createElement("p",null,"\u041d\u0430\u043f\u0438\u0441\u0430\u0442\u044c \u0430\u0432\u0442\u043e\u0440\u0443 \u0432 telegram: ",r.a.createElement("a",{href:"https://teleg.run/operarus",target:"blanc"},"@operarus"))),r.a.createElement(x.a,{variant:"primary",size:"lg",style:{display:"block",width:"200px",margin:"40% auto"},onClick:function(e){e.preventDefault(),o()}},"\u041f\u0440\u043e\u0439\u0442\u0438 \u0442\u0435\u0441\u0442"))},y=function(){return r.a.createElement("div",{style:{display:"flex",justifyContent:"center",paddingTop:"2rem"}},r.a.createElement("div",{className:"preloader-wrapper active"},r.a.createElement("div",{className:"spinner-layer spinner-red-only"},r.a.createElement("div",{className:"circle-clipper left"},r.a.createElement("div",{className:"circle"})),r.a.createElement("div",{className:"gap-patch"},r.a.createElement("div",{className:"circle"})),r.a.createElement("div",{className:"circle-clipper right"},r.a.createElement("div",{className:"circle"})))))};var S=function(e){var t=function(){var e=Object(a.useState)(null),t=Object(p.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)(!1),l=Object(p.a)(c,2),o=l[0],s=l[1],i=Object(a.useState)(null),u=Object(p.a)(i,2),m=u[0],f=u[1],d=Object(a.useCallback)((function(e,t){r(e),f(t),localStorage.setItem("userData",JSON.stringify({userId:t,token:e}))}),[]),b=Object(a.useCallback)((function(){r(null),f(null),localStorage.removeItem("userData")}),[]);return Object(a.useEffect)((function(){var e=JSON.parse(localStorage.getItem("userData"));e&&e.token&&d(e.token,e.userId),s(!0)}),[d]),{login:d,logout:b,token:n,userId:m,ready:o}}(),n=t.token,c=t.login,l=t.logout,i=t.userId,u=t.ready,m=!!n,f=function(e,t){return e?r.a.createElement(s.d,null,r.a.createElement(s.b,{path:"/",render:function(e){return r.a.createElement(w,Object.assign({},t,e))},exact:!0}),r.a.createElement(s.b,{path:"/bilet/:id",render:function(e){return r.a.createElement(w,Object.assign({},t,e))}}),r.a.createElement(s.a,{to:"/"})):r.a.createElement(s.d,null,r.a.createElement(s.b,{path:"/",exact:!0},r.a.createElement(j,null)),r.a.createElement(s.a,{to:"/"}))}(m,e);return u?r.a.createElement(g.Provider,{value:{token:n,login:c,logout:l,userId:i,isAuthenticated:m}},r.a.createElement(o.a,null,"",r.a.createElement("div",{className:"container"},f))):r.a.createElement(y,null)};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(S,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[31,1,2]]]);
//# sourceMappingURL=main.3d2bb33e.chunk.js.map